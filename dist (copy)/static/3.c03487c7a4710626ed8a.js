webpackJsonp([3],{34:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var o,a=n(104),s=i(a),r=n(5),c=i(r),l=n(1),d=i(l),u=n(36),f=n(3),p=n(18),h=p.messengerUrl,m={apiKey:"AIzaSyA9QkPMXFnHnOlHPl5CcnxNUw7h-xiPvas",authDomain:"tunijobs-chat.firebaseapp.com",databaseURL:"https://tunijobs-chat.firebaseio.com",storageBucket:"tunijobs-chat.appspot.com"};u("https://www.gstatic.com/firebasejs/3.0.3/firebase.js",function(){o=window.firebase,o.initializeApp(m)}),t.exports={connected:!1,subscribedChatId:!1,init:function(){var t=this;return d["default"].apiAsync("GET","/connexion","").then(function(e){return t.signinOrSignup(e.tchatToken)})["catch"](function(t){return c["default"].reject(t)})},signinOrSignup:function(t){var e=this,n={};return o.auth().signInWithCustomToken(t).then(function(t){return d["default"].apiAsync("GET","/profile?fields=[firstname,lastname,id,uuid,email]")})["catch"](function(t){return c["default"].reject(t)}).then(function(t){return n=t,e.connected=n.uuid,o.database().ref(h+"users/"+n.uuid).once("value")})["catch"](function(t){return c["default"].reject(t)}).then(function(t){return t.val()?t.val():o.database().ref(h+"users/"+n.uuid).set({username:n.firstname+" "+n.lastname,email:n.email,id:n.id,uuid:n.uuid})})["catch"](function(t){return c["default"].reject(t)}).then(function(t){if(!t.chats)return t;var n=s["default"](t.chats),i=[];return n.forEach(function(t){i.push(e.subscribeToChats(t))}),c["default"].all(i)})["catch"](function(t){return c["default"].reject(t)})},signout:function(){var t=this;return o.auth().signOut().then(function(){t.connected=!1})["catch"](function(t){return c["default"].reject(t)})},findOrCreateGroupChat:function(t,e){var n=this,i=""+t.id+t.responsible.id+e.id,a={};return a[t.responsible.uuid]={name:t.responsible.firstname+" "+t.responsible.lastname,id:t.responsible.id,uuid:t.responsible.uuid,img:t.responsible.img,collaborator:!0},a[e.uuid]={name:e.firstname+" "+e.lastname,id:e.id,uuid:e.uuid,img:e.img,title:e.title,collaborator:!1},t.collaborators.forEach(function(t){var e=t.profile,n=e;a[n.uuid]={name:n.firstname+" "+n.lastname,id:n.id,uuid:n.uuid,img:n.img,title:n.title,collaborator:!0}}),this.connected?o.database().ref(h+"chats/"+i).once("value").then(function(n){return n.val()?i:o.database().ref(h+"chats/"+i).set({id:i,responsible:a[t.responsible.uuid],jobofferUUID:t.uuid,jobofferId:t.id,company:{id:t.company.id,name:t.company.name,logo:t.company.logo},applicant:a[e.uuid],title:t.title,state:"open",participants:a,messages:[{timestamp:(new Date).toISOString(),owner:t.responsible.uuid,content:t.responsible.firstname+" "+t.responsible.lastname+" invited you to chat :)"}]})})["catch"](function(t){return c["default"].reject(t)}).then(function(t){var e=[];return s["default"](a).forEach(function(t){e.push(n.verifyOrCreateReferenceToChat(t,i))}),c["default"].all(e)})["catch"](function(t){return c["default"].reject(t)}).then(function(t){return i})["catch"](function(t){return c["default"].reject(t)}):this.init().then(function(){return n.findOrCreateGroupChat(t,e)})["catch"](function(t){return c["default"].reject(t)})},verifyOrCreateReferenceToChat:function(t,e){return o.database().ref(h+"users/"+t+"/chats/"+e).once("value").then(function(n){return n.val()?e:o.database().ref(h+"users/"+t+"/chats/"+e).push(!0).then(o.database().ref(h+"users/"+t+"/newMessages/"+e).push(!0))})},getChats:function(){var t=this;return this.connected?o.database().ref(h+"users/"+this.connected+"/chats").once("value").then(function(t){var e=t.val(),n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(o.database().ref(h+"chats/"+i).once("value"));return c["default"].all(n)})["catch"](function(t){return c["default"].reject(t)}).then(function(t){var e=[];return t.length&&t.forEach(function(t){e.push(t.val())}),e})["catch"](function(t){return c["default"].reject(t)}):this.init().then(function(){return t.getChats()})["catch"](function(t){return c["default"].reject(t)})},getChatById:function(t){var e=this;return this.connected?t===this.subscribedChatId||this.subscribedChatId===!1?(this.subscribedChatId=t,o.database().ref(h+"chats/"+t).once("value").then(function(e){return o.database().ref(h+"chats/"+t).on("value",function(t){f.$emit("messenger:new-messages",t.val())}),e.val()})["catch"](function(t){return c["default"].reject(t)})):(o.database().ref(h+"chats/"+this.subscribedChatId).off(),this.subscribedChatId=t,o.database().ref(h+"chats/"+t).once("value").then(function(e){return o.database().ref(h+"chats/"+t).on("value",function(t){f.$emit("messenger:new-messages",t.val())}),e.val()})["catch"](function(t){return c["default"].reject(t)})):this.init().then(function(){return e.getChatById(t)})["catch"](function(t){return c["default"].reject(t)})},sendMsg:function(t,e,n){var i=this,a=o.database().ref().child(h+"chats/"+t+"/messages").push().key,r={};return r[h+"chats/"+t+"/messages/"+a]={content:e,owner:this.connected,timestamp:(new Date).toISOString()},o.database().ref().update(r).then(function(e){var a=s["default"](n),r=[];return a.forEach(function(e){e!==i.connected&&r.push(o.database().ref(h+"users/"+e+"/newMessages/"+t).push(!0))}),c["default"].all(r)})["catch"](function(t){return c["default"].reject(t)}).then(function(t){return c["default"].resolve(t)})["catch"](function(t){return c["default"].reject(t)})},checkNotifications:function(){var t=this;return this.connected?o.database().ref(h+"users/"+this.connected+"/newMessages").once("value").then(function(t){var e=s["default"](t.val());f.$emit("messenger:new-message-notification",{messages:e})})["catch"](function(t){return c["default"].reject(t)}):this.init().then(function(){return t.checkNotifications()})["catch"](function(t){return c["default"].reject(t)})},subscribeToChats:function(){return o.database().ref(h+"users/"+this.connected+"/newMessages").on("value",function(t){var e=s["default"](t.val());f.$emit("messenger:new-message-notification",{messages:e})})},messageRead:function(t){return o.database().ref(h+"users/"+this.connected+"/newMessages/"+t).remove()},addCollaboratorToChats:function(t,e){var n=e.applications.map(function(t){return""+e.id+e.responsible.id+t.recommended}),i={name:t.firstname+" "+t.lastname,id:t.id,uuid:t.uuid,img:t.img,title:t.title,collaborator:!0},a=[];return n.forEach(function(e){a.push(o.database().ref(h+"chats/"+e).once("value").then(function(n){return n.val()?o.database().ref(h+"users/"+t.uuid+"/chats/"+e).push(!0).then(o.database().ref(h+"users/"+t.uuid+"/newMessages/"+e).push(!0)).then(o.database().ref(h+"chats/"+e+"/participants/"+t.uuid).set(i)):0}))}),c["default"].all(a)},removeCollaboratorFromChats:function(t,e,n){var i=n.map(function(t){return""+e.id+e.responsible.id+t.recommended}),a=[];return i.forEach(function(e){a.push(o.database().ref(h+"chats/"+e).once("value").then(function(n){return n.val()?o.database().ref(h+"users/"+t.uuid+"/chats/"+e).remove().then(o.database().ref(h+"users/"+t.uuid+"/newMessages/"+e).remove()).then(o.database().ref(h+"chats/"+e+"/participants/"+t.uuid).remove()):0}))}),c["default"].all(a)},toggleLockChat:function(t){var e="open"===t.state?"locked":"open";return o.database().ref(h+"chats/"+t.id+"/state").set(e)}}},36:function(t,e,n){var i,o;/*!
	  * $script.js JS loader & dependency manager
	  * https://github.com/ded/script.js
	  * (c) Dustin Diaz 2014 | License MIT
	  */
!function(a,s){"undefined"!=typeof t&&t.exports?t.exports=s():(i=s,o="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==o&&(t.exports=o)))}("$script",function(){function t(t,e){for(var n=0,i=t.length;i>n;++n)if(!e(t[n]))return c;return 1}function e(e,n){t(e,function(t){return!n(t)})}function n(a,s,r){function c(t){return t.call?t():f[t]}function d(){if(!--b){f[g]=1,v&&v();for(var n in h)t(n.split("|"),c)&&!e(h[n],c)&&(h[n]=[])}}a=a[l]?a:[a];var u=s&&s.call,v=u?s:r,g=u?a.join(""):s,b=a.length;return setTimeout(function(){e(a,function t(e,n){return null===e?d():(n||/^https?:\/\//.test(e)||!o||(e=-1===e.indexOf(".js")?o+e+".js":o+e),m[e]?(g&&(p[g]=1),2==m[e]?d():setTimeout(function(){t(e,!0)},0)):(m[e]=1,g&&(p[g]=1),void i(e,d)))})},0),n}function i(t,e){var n,i=s.createElement("script");i.onload=i.onerror=i[u]=function(){i[d]&&!/^c|loade/.test(i[d])||n||(i.onload=i[u]=null,n=1,m[t]=2,e())},i.async=1,i.src=a?t+(-1===t.indexOf("?")?"?":"&")+a:t,r.insertBefore(i,r.lastChild)}var o,a,s=document,r=s.getElementsByTagName("head")[0],c=!1,l="push",d="readyState",u="onreadystatechange",f={},p={},h={},m={};return n.get=i,n.order=function(t,e,i){!function o(a){a=t.shift(),t.length?n(a,o):n(a,e,i)}()},n.path=function(t){o=t},n.urlArgs=function(t){a=t},n.ready=function(i,o,a){i=i[l]?i:[i];var s=[];return!e(i,function(t){f[t]||s[l](t)})&&t(i,function(t){return f[t]})?o():!function(t){h[t]=h[t]||[],h[t][l](o),a&&a(s)}(i.join("|")),n},n.done=function(t){n([null],t)},n})},37:function(t,e){"use strict";function n(t){var e=t.messenger;return e.loaded}function i(t){var e=t.messenger;return e.loaded}function o(t){var e=t.messenger;return e.chats}function a(t){var e=t.messenger;return e.data}function s(t){var e=t.messenger;return e.connectedUser}function r(t){var e=t.messenger;return e.connectedUserUUID}function c(t){var e=t.messenger;return e.numberOfNotifications}function l(t){var e=t.messenger;return e.messagesToNotifyAbout}Object.defineProperty(e,"__esModule",{value:!0}),e.isReady=n,e.chatId=i,e.messagesList=o,e.chatData=a,e.userId=s,e.userUUID=r,e.numberOfNotifications=c,e.messagesToNotifyAbout=l},40:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.setConnectedUser=e.checkNewNotifications=e.setMessagesToNotifyAbout=e.setNotificationsNumber=e.updateMsgs=e.messageRead=e.toggleLockChat=e.sendMsg=e.unloadChat=e.loadChatList=e.loadChat=void 0;var o=n(114),a=i(o),s=n(1),r=i(s),c=n(34),l=i(c);e.loadChat=function(t,e){var n=t.dispatch;return l["default"].getChatById(e).then(function(t){return n("SET_CHAT_DATA",t),t})["catch"](function(t){return void 0})},e.loadChatList=function(t){var e=t.dispatch;return l["default"].getChats().then(function(t){return e("SET_CHATS_LIST",t),t})["catch"](function(t){return void 0})},e.unloadChat=function(t){var e=t.dispatch;e("UNLOAD_CHAT")},e.sendMsg=function(t,e,n,i){var o=t.dispatch;return l["default"].sendMsg(e,n,i).then(function(t){return o("MSG_SENT",n),t})["catch"](function(t){return void 0})},e.toggleLockChat=function(t,e){var n=t.dispatch,i=JSON.parse(a["default"](e));return n("TOGGLE_LOCK_CHAT",e.id),l["default"].toggleLockChat(i).then(function(t){return t})["catch"](function(t){n("TOGGLE_LOCK_CHAT",e.id)})},e.messageRead=function(t,e){var n=t.dispatch;return l["default"].messageRead(e).then(function(t){return n("MSG_READ",e),t})["catch"](function(t){return void 0})},e.updateMsgs=function(t,e){var n=t.dispatch;n("SET_MESSAGES",e)},e.setNotificationsNumber=function(t,e){var n=t.dispatch;n("SET_NOTIFICATIONS_NUMBER",e)},e.setMessagesToNotifyAbout=function(t,e){var n=t.dispatch;n("SET_NOTIFICATIONS_MESSAGES",e)},e.checkNewNotifications=function(t,e){t.dispatch;return l["default"].checkNotifications()},e.setConnectedUser=function(t){var e=t.dispatch;return r["default"].apiAsync("GET","/profile?fields=[id,uuid]").then(function(t){return e("SET_CONNECTED_USER",t.id),e("SET_CONNECTED_USER_UUID",t.uuid),t},function(t){return t})}},150:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var o=n(97),a=i(o),s=n(1),r=n(3);t.exports={data:function(){return{id:(65536*(1+Math.random())|0).toString(16).substring(1),listMe:!1,clickOut:null,oldState:null,options:{pushed:{value:"pushed",icon:"fa-hourglass-half"},rejected:{value:"rejected",icon:"fa-ban"},hired:{value:"hired",icon:"fa-check"},"phone interview":{value:"phone interview",icon:"fa-phone"},"office interview":{value:"office interview",icon:"fa-street-view"}}}},props:{recommendation:{type:Object,require:!0,"default":{}},recomId:{type:Number}},computed:{icon:function(){return this.recommendation.state&&this.options[this.recommendation.state]?this.options[this.recommendation.state].icon:this.options.pushed.icon}},created:function(){var t=this;this.clickOut=function(e){return $(e.target).closest("#drop-down-"+t.id).length?!0:void t.showmenu(null)}},methods:{showmenu:function(){this.listMe=!this.listMe,this.listMe?$(document).bind("click",this.clickOut):$(document).unbind("click",this.clickOut)},updateState:function(t){var e=this,n=this.recomId||this.recommendation.id,i=this.recommendation.joboffer_id||this.$route.params.jobId;this.oldState=this.recommendation.state,this.recommendation.state=t,s.apiAsync("PUT","/dashboard/joboffers/"+i+"/recommendations/"+n,{state:t}).then(function(t){return r.$emit("joboffer:rec-state-changed",a["default"](t,{oldvalue:e.oldState,newvalue:t.state}))})["catch"](function(){return e.recommendation.state=e.oldState})}}}},154:function(t,e){},157:function(t,e){t.exports='<div id=drop-down-{{id}} class="drop-down p-xxs hand font-1-2 bold" @click=showmenu _v-7af231c2=""><div class="border p-xxs fx-row fx-start-center" _v-7af231c2=""><i class="material-icons md-20 orange600" _v-7af231c2=""></i> <span class="hand uppercase" _v-7af231c2="">{{recommendation.state}}</span> <i class="fa fa-angle-down p-l-sm" _v-7af231c2=""></i></div><div class=flesh v-show=listMe _v-7af231c2=""></div><ul class="border bg-white down-menu p-xxs m-none m-t-xs" v-show=listMe _v-7af231c2=""><li class="capital border-top p-xxs font-8" v-for="op in options" @click=updateState(op.value) _v-7af231c2=""><span _v-7af231c2=""><i class="fa m-r-xs" :class=op.icon _v-7af231c2=""></i> {{op.value}}</span></li></ul></div>'},159:function(t,e,n){var i,o;n(154),i=n(150),o=n(157),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=o)},198:function(t,e,n){"use strict";var i=n(1),o=n(3),a=n(159);t.exports={data:function(){return{condidate:null,showme:!1,isToggled:!1,recomId:null,details:null,jobId:null,editable:!1}},ready:function(){var t=this;o.$on("recommended:show-side",this.showCard),o.$on("joboffer:rec-state-changed",function(e){return t.details.historyable.$set(t.details.historyable.length,e)})},destroyed:function(){o.$off("recommended:show-side"),o.$off("joboffer:rec-state-changed")},components:{status:a},methods:{showCard:function(t){this.jobId=t.joboffer_id,this.showme=!0,this.recomId=t.id,this.getRecommend(t.id),this.editable=!1},hideCard:function(t){this.details=null,this.showme=!1},toggle:function(){this.isToggled=!this.isToggled},getRecommend:function(t){var e=this,n=this.jobId;i.apiAsync("GET","/dashboard/joboffers/"+n+"/recommendations/"+t).then(function(t){e.details=t,e.condidate=t.target})},editComment:function(){var t=void 0,e=this.$els.comment.innerText||" ";if(this.editable){if(this.editable=!1,t==e)return;this.sendComment(e,t)}else this.editable=!0,t=e},sendComment:function(t,e){var n=this;i.apiCall({comment:t},"/dashboard/joboffers/"+this.jobId+"/recommendations/"+this.recomId+"/comment","POST",function(t,i){t&&(n.$els.comment.innerText=e)})},gotoProfile:function(t){var e=t.slug?t.slug:t.uuid;this.$router.go({name:"profile",params:{id:e}})}}}},213:function(t,e){},230:function(t,e){t.exports='<div v-show=showme _v-518e5caa=""><div class=recomm-card transition=slide v-if=details _v-518e5caa=""><div class="rc-container fx-row fx-space-between" _v-518e5caa=""><section class="rc-nav fx-column fx" _v-518e5caa=""><button class=btn _v-518e5caa=""><span _v-518e5caa=""><svg height=12 viewBox="0 0 12 12" width=12 xmlns=http://www.w3.org/2000/svg _v-518e5caa=""><path d="M6 4.586l4.24-4.24c.395-.395 1.026-.392 1.416-.002.393.393.39 1.024 0 1.415L7.413 6l4.24 4.24c.395.395.392 1.026.002 1.416-.393.393-1.024.39-1.415 0L6 7.413l-4.24 4.24c-.395.395-1.026.392-1.416.002-.393-.393-.39-1.024 0-1.415L4.587 6 .347 1.76C-.05 1.364-.048.733.342.343c.393-.393 1.024-.39 1.415 0L6 4.587z" fill-rule=evenodd _v-518e5caa=""></path></svg></span></button> <button class=btn _v-518e5caa=""><span _v-518e5caa=""><svg height=11 viewBox="0 0 7 11" width=7 xmlns=http://www.w3.org/2000/svg _v-518e5caa=""><path d="M.256 5.498c0-.255.098-.51.292-.703L4.795.548C5.18.163 5.817.16 6.207.55c.393.393.392 1.023.002 1.412L2.67 5.5l3.54 3.538c.384.384.388 1.02-.003 1.412-.393.393-1.023.39-1.412.002L.548 6.205c-.192-.192-.29-.447-.29-.702z" fill-rule=evenodd fill=#948B88 _v-518e5caa=""></path></svg></span></button> <button class=btn _v-518e5caa=""><span _v-518e5caa=""><svg height=11 viewBox="0 0 7 11" width=7 xmlns=http://www.w3.org/2000/svg _v-518e5caa=""><path d="M6.744 5.502c0 .255-.098.51-.292.703l-4.247 4.247c-.385.385-1.022.388-1.412-.002C.4 10.057.4 9.427.79 9.038L4.33 5.5.79 1.962C.407 1.578.403.942.794.55 1.186.157 1.816.16 2.204.548l4.248 4.247c.192.192.29.447.29.702z" fill-rule=evenodd fill=#948B88 _v-518e5caa=""></path></svg></span></button></section><section class="rc-content border-left p-m" _v-518e5caa=""><a @click=hideCard class="btn-floating btn waves-effect waves-light red pull-right" _v-518e5caa=""><i class=material-icons _v-518e5caa=""></i></a><div class="fx-row fx-start-center" v-if=condidate _v-518e5caa=""><img @click=gotoProfile(condidate) :src=condidate.img alt=user class="user-image img-circle border size-48 hand" _v-518e5caa=""><div class=m-l-sm _v-518e5caa=""><div _v-518e5caa=""><a _v-518e5caa=""><h5 @click=gotoProfile(condidate) class="jdh--title capital m-none hand" _v-518e5caa="">{{condidate.firstname}} {{condidate.lastname}}</h5></a><h6 class="capital m-none" _v-518e5caa="">{{condidate.title}}</h6></div></div></div><div class="fx-row m-t-sm" v-if=condidate _v-518e5caa=""><a class="btn social -tw m-r-xs" href=http://fb.com/{{condidate.fbLink}} target=_blank v-if=condidate.fbLink _v-518e5caa=""><i class="fa fa-twitter" _v-518e5caa=""></i> <span class=capital v-ii18n=twitter _v-518e5caa="">twitter</span></a> <a class="btn social -fb m-r-xs" href=http://twitter.com/{{condidate.twitterLink}} target=_blank v-if=condidate.twitterLink _v-518e5caa=""><i class="fa fa-facebook-official" _v-518e5caa=""></i> <span class=capital v-ii18n=facebook _v-518e5caa="">facebook</span></a> <a class="btn social -in m-r-xs" href=http://linkedin.com/in/{{condidate.LinkedInLink}} target=_blank v-if=condidate.LinkedInLink _v-518e5caa=""><i class="fa fa-linkedin" _v-518e5caa=""></i> <span class=capital v-ii18n=linkedin _v-518e5caa="">linkedin</span></a></div><div class=m-t-sm v-if=condidate _v-518e5caa=""><label class=border-bottom _v-518e5caa=""><b class="capital __active" v-ii18n=about _v-518e5caa="">about</b></label><p class="m-none m-b-xs" _v-518e5caa="">{{condidate.about}}</p></div><div class="fx-row fx-start-center" _v-518e5caa=""><h4 class="capital m-r-sm" _v-518e5caa=""><span v-ii18n=status _v-518e5caa="">status</span></h4><status :recom-id=recomId :recommendation=details _v-518e5caa=""></status></div><div class=m-t-sm _v-518e5caa=""><label class=border-bottom _v-518e5caa=""><b class="capital __active m-r-xs" v-ii18n=logs _v-518e5caa="">logs</b> <i v-if=details.commentable[0] _v-518e5caa="">{{details.commentable[0].updated_at | moment "from" "now"}}</i> <span @click=editComment type=button class="pull-right hand" _v-518e5caa=""><i v-if=!editable class=material-icons _v-518e5caa=""></i> <i v-if=editable class=material-icons _v-518e5caa=""></i> {{editable ? \'Save\' : \'Edit\'}}</span></label><p v-if=details.commentable[0] class="m-none m-b-xs rc-comment" contenteditable={{editable}} v-el:comment="" _v-518e5caa="">{{details.commentable[0].comment}}</p><p v-else="" class="m-none m-b-xs rc-comment" contenteditable={{editable}} v-el:comment="" _v-518e5caa=""></p></div><div v-if="details.historyable &amp;&amp; details.historyable.length" class=m-t-sm _v-518e5caa=""><label class=border-bottom _v-518e5caa=""><b class="capital __active m-r-xs" v-ii18n=history _v-518e5caa="">history</b></label><ul class=timeline _v-518e5caa=""><li class=tl-item track-by=$index v-for="history in details.historyable" _v-518e5caa=""><div class="tl-head fx-row fx-start-center" _v-518e5caa=""><h4 class="m-none capital p-r-xs" _v-518e5caa="">{{history.item}} <span class=font-9 v-ii18n=changed _v-518e5caa="">changed</span></h4><i _v-518e5caa="">{{history.updated_at | moment "from" "now"}}</i></div><p class="capital m-none m-t-xs" _v-518e5caa=""><span v-ii18n=changedFrom _v-518e5caa="">changed from</span> <b _v-518e5caa="">{{history.oldvalue}}</b> to <b _v-518e5caa="">{{history.newvalue}}</b></p></li></ul></div></section></div></div></div>'},241:function(t,e,n){var i,o;n(213),i=n(198),o=n(230),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=o)},278:function(t,e,n){var i,o;n(412),i=n(340),o=n(509),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=o)},340:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var o=n(104),a=i(o),s=n(40),r=n(37),c=n(574),l=n(575),d=n(241),u=n(3);t.exports={vuex:{actions:{sendMsg:s.sendMsg,loadChat:s.loadChat,toggleLockChat:s.toggleLockChat,unloadChat:s.unloadChat,updateMsgs:s.updateMsgs,messageRead:s.messageRead,loadChatList:s.loadChatList,setConnectedUser:s.setConnectedUser},getters:{isReady:r.isReady,chatData:r.chatData,messagesList:r.messagesList,chatId:r.chatId,userId:r.userId,userUUID:r.userUUID,messagesToNotifyAbout:r.messagesToNotifyAbout}},components:{loading:c,noMessages:l,recomSide:d},data:function(){return{messageToSend:"",loading:!0}},filters:{time:function(t){return new Date(t).toTimeString().split(" ")[0].substr(0,5)}},computed:{},ready:function(){var t=this;t.loading=!0,u.$on("messenger:new-messages",t.updateMessages),t.setConnectedUser(),window.$("#app").hasClass("container")&&window.$("#app").toggleClass("container")},methods:{sendMessage:function(){var t=this;return t.messageToSend?(t.sendMsg(this.chatId,t.messageToSend,t.chatData.participants),void t.updateScroll(800)):t.reset()},reset:function(){var t=this;t.messageToSend=""},updateMessages:function(t){var e=this;e.reset(),e.updateMsgs(t),e.updateScroll(800),e.messageRead(e.chatId)},openMessage:function(t){var e=this;e.$router.go("/messenger/"+t.id)},getUserImageLink:function(t){var e=this;return e.chatData.participants[t].img},updateScroll:function(t){window.$("#messages-block").animate({scrollTop:window.$("#messages-block")[0].scrollHeight},t,"swing")},isApplicant:function(t){var e=this;return e.chatData.applicant.uuid===t},isResponsible:function(t){var e=this;return e.userUUID===t},isMessageNonRead:function(t){var e=this,n=!1;return e.messagesToNotifyAbout.forEach(function(e){e===t&&(n=!0)}),n},ownerName:function(t){var e=this;return e.chatData.participants[t].name},isDifferentOwner:function(t,e){var n=this,i=a["default"](n.chatData.messages);return 0===e?!0:n.chatData.messages[i[e-1]].owner!==t},showCard:function(t){var e=this,n={joboffer_id:e.chatData.jobofferId,id:t.owner};u.$emit("recommended:show-side",n)}},route:{data:function(t){var e=this,n=t.to,i=this,o=Number(n.params.id);i.unloadChat(),i.loadChatList().then(function(t){return i.loading=!1,o?i.loadChat(o):0})["catch"](function(){return i.$router.go("/messenger")}).then(function(t){var n=e;n.updateMsgs(t),n.updateScroll(0)})["catch"](function(){return i.$router.go("/messenger")}).then(function(t){return o&&i.messageRead(o),0})["catch"](function(){return i.$router.go("/messenger")})}}}},412:function(t,e){},416:function(t,e){},435:function(t,e){},509:function(t,e){t.exports='<section transition=fade-in class="row fixed" _v-1a24127a=""><loading v-if=loading _v-1a24127a=""></loading><div class="row full-height enlcosing" v-else="" _v-1a24127a=""><no-messages v-if=!messagesList.length _v-1a24127a=""></no-messages><div class="row full-height" v-else="" _v-1a24127a=""><ul class="collection col s3 full-height scrollable-block" _v-1a24127a=""><li class="collection-item avatar" :class="{\'non-read-background\': isMessageNonRead(item.id)}" v-for="item in messagesList" track-by=$index @click=openMessage(item) _v-1a24127a=""><img v-if="item.applicant.uuid != userUUID" :src=item.applicant.img alt="" class=circle _v-1a24127a=""> <img v-else="" :src=item.company.logo alt="" class=circle _v-1a24127a=""> <span v-if="item.applicant.uuid != userUUID" class=title _v-1a24127a="">{{item.applicant.name}}</span> <span v-else="" class=title _v-1a24127a="">{{item.company.name}}</span><p _v-1a24127a="">{{item.title}}</p><span class=lock-icon v-if=isResponsible(item.responsible.uuid) @click=toggleLockChat(item) v-show=isReady _v-1a24127a=""><i v-if="item.state === \'open\'" class=material-icons _v-1a24127a=""></i> <i v-else="" class="material-icons lock-icon-locked" _v-1a24127a=""></i></span> <a class=open-job-offer v-link="\'/joboffer/\' + item.jobofferUUID" target=_blank v-show=isReady _v-1a24127a=""><i class=material-icons _v-1a24127a=""></i></a></li></ul><div class="col s9 chat-block full-height" v-show=isReady _v-1a24127a=""><div class=scrollable-block id=messages-block _v-1a24127a=""><div class=clearfix v-for="item in chatData.messages" track-by=$index _v-1a24127a=""><div v-if="item.owner == userUUID" class="fx-row from-right" _v-1a24127a=""><div class="row fx" _v-1a24127a=""><span class="small-font col s12 from-right" v-if="isDifferentOwner(item.owner, $index)" _v-1a24127a="">{{ownerName(item.owner)}}</span><p class="m-none text-right self-chat-text-color chat-text" _v-1a24127a="">{{item.content}}</p><span class="small-font col s12" _v-1a24127a="">{{item.timestamp | time}}</span></div><img :src=getUserImageLink(item.owner) class="circle size-32 fx-end small-margin chat-image-with-name" v-if="isDifferentOwner(item.owner, $index)" @click=showCard(item) _v-1a24127a=""> <img :src=getUserImageLink(item.owner) class="circle size-32 fx-end small-margin" v-else="" @click=showCard(item) _v-1a24127a=""></div><div v-else="" class=fx-row _v-1a24127a=""><img :src=getUserImageLink(item.owner) class="circle size-32 fx small-margin chat-image-with-name" v-if="isDifferentOwner(item.owner, $index)" @click=showCard(item) _v-1a24127a=""> <img :src=getUserImageLink(item.owner) class="circle size-32 fx small-margin" v-else="" @click=showCard(item) _v-1a24127a=""><div class="row fx-end" _v-1a24127a=""><span class="small-font col s12" v-if="isDifferentOwner(item.owner, $index)" _v-1a24127a="">{{ownerName(item.owner)}}</span><p v-if=isApplicant(item.owner) class="m-none chat-text applicant-chat-text-color" _v-1a24127a="">{{item.content}}</p><p v-else="" class="m-none chat-text other-chat-text-color" _v-1a24127a="">{{item.content}}</p><span class="small-font col s12" _v-1a24127a="">{{item.timestamp | time}}</span></div></div></div></div><hr _v-1a24127a=""><form class="col s12 message-input-block" v-on:submit.prevent=sendMessage() _v-1a24127a=""><div class=row flex="" _v-1a24127a=""><input v-model=messageToSend class="col s11" v-bind:disabled="chatData.state === \'locked\'" v-bind:placeholder="chatData.state === \'locked\' ? \'The chat is locked by the responsible :(\' : \'Type your message ...\'" _v-1a24127a=""> <button class="btn message-send-btn col s1" type=button v-on:keyup.enter=sendMessage() :class="{\'disabled\': chatData.state === \'locked\'}" v-on:click=sendMessage() _v-1a24127a=""><i style="color: #FFFFFF" class=material-icons _v-1a24127a=""></i></button></div></form></div></div></div></section>'},513:function(t,e){t.exports='<section class=row _v-3699a8f2=""><div class="col s6 wait-message" _v-3699a8f2=""></div><div class="col s6 wait-message" _v-3699a8f2=""><div class="preloader-wrapper big active" _v-3699a8f2=""><div class="spinner-layer spinner-blue" _v-3699a8f2=""><div class="circle-clipper left" _v-3699a8f2=""><div class=circle _v-3699a8f2=""></div></div><div class=gap-patch _v-3699a8f2=""><div class=circle _v-3699a8f2=""></div></div><div class="circle-clipper right" _v-3699a8f2=""><div class=circle _v-3699a8f2=""></div></div></div></div></div></section>'},532:function(t,e){t.exports='<section class=row _v-efe21bba=""><div class="col s2 no-message" _v-efe21bba="">.</div><div class="col s8 no-message" _v-efe21bba="">no messages dude :( forever alone we stand, united we fall...</div><div class="col s2 no-message" _v-efe21bba="">.</div></section>'},574:function(t,e,n){var i,o;n(416),o=n(513),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=o)},575:function(t,e,n){var i,o;n(435),o=n(532),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=o)}});